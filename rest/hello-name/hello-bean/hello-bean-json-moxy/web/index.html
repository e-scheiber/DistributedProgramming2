<!doctype html>
<head>
  <script type="text/javascript" >
  <!--
    function initRequest() {
      if (window.XMLHttpRequest) {
          return new XMLHttpRequest();
      } else if (window.ActiveXObject){
          return new ActiveXObject("Microsoft.XMLHTTP");
      }
    }

    function compute() {
      var numeField=document.getElementById("nume");
      var url = "/JsonHelloMoxy/resources/hello"
      var msg=JSON.stringify({
        "msg":numeField.value
      });     
      var req = initRequest();
      
      req.onreadystatechange = function() {
        if (req.readyState == 4) {
          if (req.status == 200) {
              parseMessages(req.responseText);
          }else {
              alert(req.status+" : "+req.statusText);
          }
        }
      };
      req.open("post", url, true);
      req.setRequestHeader("Content-Type","application/json");
      req.send(msg);
    }

    function parseMessages(responseText) {
      var res=responseText;
      var s=JSON.parse(res);
      document.getElementById("rezultat").innerHTML=s.msg;
    }
  -->
  </script>
  <title> Json Hello Moxy AJAX</title>
</head>  
<body bgcolor="#bbccbb">
  <center>
  <h1> Pagina de apelare TestServlet </h1>
  
    <table> 
      <tr>
        <td><label> Introduceti numele </label></td>
        <td>    
           <input type="text" id="nume" size="10" required />
        </td>
      </tr>  
      <tr>
        <td>          
           <p><input type="button" value="Trimite" onClick="compute()" >  
        </td>
      </tr>
    </table>  
    <p>
    <div id="rezultat" />
  <center>
</body>
</html>

